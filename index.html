Padmabhushan Patil, [17-07-2025 11:10]
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Tracker & To-Do List</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base styles for a modern look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better content flow */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08); /* Stronger, softer shadow */
            width: 100%;
            max-width: 900px; /* Max width for desktop */
            overflow: hidden; /* Ensures rounded corners apply to children */
            display: flex;
            flex-direction: column;
        }
        /* Tab Styling */
        .tab-button {
            padding: 1rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent; /* For active indicator */
            color: #6b7280; /* Gray 500 */
        }
        .tab-button.active {
            color: #4f46e5; /* Indigo 600 */
            border-color: #4f46e5;
            /* background-color: #eef2ff; /* Removed background for cleaner look */
        }
        .tab-button:not(.active):hover {
            background-color: #f8fafc; /* Lighter hover for tabs */
        }
        .sub-tab-button {
            padding: 0.75rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
            font-size: 0.9rem;
            color: #6b7280; /* Gray 500 */
        }
        .sub-tab-button.active {
            color: #1d4ed8; /* Blue 700 */
            border-color: #1d4ed8;
            /* background-color: #eff6ff; /* Removed background for cleaner look */
        }
        .sub-tab-button:not(.active):hover {
            background-color: #eef2ff; /* Light blue hover */
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            overflow-y: auto; /* Enable scrolling for long content */
            max-height: calc(100vh - 150px); /* Adjust based on header/footer height */
        }
        .tab-content.active {
            display: block;
        }
        .trac-sub-content {
            display: none; /* Hidden by default */
        }
        .trac-sub-content.active {
            display: block; /* Shown when active */
        }

        /* Style for editable time/text areas */
        .editable-time, .editable-text, .editable-task-name, .editable-chapter-name {
            border: 1px solid #e5e7eb; /* Gray 200 */
            border-radius: 0.75rem; /* More rounded */
            padding: 0.75rem 1rem; /* More padding */
            outline: none;
            transition: all 0.2s ease;
            min-height: 48px; /* Ensure consistent height */
            box-sizing: border-box;
            background-color: #f9fafb; /* Light gray background */
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05); /* Subtle inner shadow */
        }
        .editable-time:focus, .editable-text:focus, .editable-task-name:focus, .editable-chapter-name:focus {
            border-color: #a5b4fc; /* Light indigo 300 */
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); /* Lighter focus ring */
            background-color: #ffffff;
        }

Padmabhushan Patil, [17-07-2025 11:10]
/* Daily Tracker Grid (New UI) */
        .daily-tracker-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* Smaller gap between rows */
        }
        .daily-tracker-row {
            display: flex;
            background-color: #ffffff;
            border-radius: 0.75rem; /* Rounded corners for each row */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Soft shadow for each row */
            overflow: hidden; /* Ensure rounded corners apply */
        }
        .daily-tracker-time {
            flex-shrink: 0; /* Prevent shrinking */
            width: 100px; /* Fixed width for time */
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #4b5563; /* Gray 700 */
            background-color: #f8fafc; /* Very light background for time */
            border-right: 1px solid #e5e7eb;
            border-radius: 0.75rem 0 0 0.75rem; /* Rounded only on left side */
        }
        .daily-tracker-activity {
            flex-grow: 1;
            padding: 0.75rem 1rem;
            border: none; /* Remove default textarea border */
            outline: none;
            resize: none; /* Disable textarea resize handle */
            background-color: transparent; /* Match parent background */
            font-size: 1rem;
            color: #374151;
            line-height: 1.5;
        }
        .daily-tracker-activity::placeholder {
            color: #9ca3af; /* Gray 400 */
        }


        /* To-Do List specific styles (Modernized further) */
        .todo-section {
            background-color: #ffffff;
            border-radius: 1rem; /* More rounded */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06); /* Slightly stronger shadow */
            margin-bottom: 1rem;
            padding: 1rem;
        }
        .todo-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }
        .todo-section-title {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* Gray 900 */
            display: flex;
            align-items: center;
        }
        .todo-section-title svg {
            margin-right: 0.5rem;
            color: #f59e0b; /* Amber 500 */
        }
        .todo-section-timer {
            font-family: 'Inter', monospace;
            font-size: 1.125rem; /* text-lg */
            font-weight: 500;
            color: #374151; /* Gray 700 */
        }
        .todo-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.25rem;
            margin-left: 1.5rem; /* Indent for sub-tasks */
            border-radius: 0.5rem;
            transition: background-color 0.2s ease;
        }
        .todo-item:hover {
            background-color: #f9fafb;
        }
        .todo-item.completed .editable-task-name {
            text-decoration: line-through;
            color: #9ca3af; /* Gray 400 */
        }
        .todo-item input[type="checkbox"] {
            margin-right: 0.75rem;
            height: 1.125rem; /* 18px */
            width: 1.125rem; /* 18px */
            border-radius: 50%; /* Circular checkbox */
            border: 1px solid #d1d5db; /* Gray 300 */
            accent-color: #4f46e5; /* Indigo for checked state */
            cursor: pointer;
            flex-shrink: 0; /* Prevent checkbox from shrinking */
        }
        .todo-item input[type="checkbox"]:checked {
            background-color: #4f46e5;
            border-color: #4f46e5;
        }
        .todo-item .editable-task-name {

Padmabhushan Patil, [17-07-2025 11:10]
background-color: transparent; /* No background for input */
            border: none;
            padding: 0;
            font-size: 1rem;
            font-weight: 400;
            color: #374151; /* Gray 700 */
            flex-grow: 1;
        }
        .todo-item .editable-task-name:focus {
            box-shadow: none;
            border-color: transparent;
        }

        .todo-item-actions {
            display: flex;
            gap: 0.25rem; /* Smaller gap for compact buttons */
            margin-left: auto;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.2s ease;
        }
        .todo-item:hover .todo-item-actions {
            opacity: 1; /* Show on hover */
        }
        .action-button {
            padding: 0.3rem; /* Smaller padding */
            border-radius: 0.375rem; /* Slightly less rounded */
            font-weight: 500;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .action-button svg {
            width: 1rem; /* Smaller icons */
            height: 1rem;
        }

        /* Specific button colors (retained) */
        .start-button {
            background-color: #d1fae5; color: #059669;
        }
        .start-button:hover { background-color: #a7f3d0; }
        .stop-button {
            background-color: #fffbeb; color: #f59e0b;
        }
        .stop-button:hover { background-color: #fef3c7; }
        .reset-button {
            background-color: #fee2e2; color: #ef4444;
        }
        .reset-button:hover { background-color: #fecaca; }
        .delete-button {
            background-color: #e0e7ff; color: #4f46e5;
        }
        .delete-button:hover { background-color: #c7d2fe; }

        /* Trac Tab Specific Styles (retained) */
        .trac-table-container {
            overflow-x: auto; /* Enable horizontal scrolling for wide tables */
            margin-top: 1.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .trac-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px; /* Minimum width to prevent excessive squishing */
        }
        .trac-table th, .trac-table td {
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            text-align: left;
            white-space: nowrap; /* Prevent text wrapping in headers */
        }
        .trac-table th {
            background-color: #f3f4f6; /* Gray 100 */
            font-weight: 600;
            color: #374151; /* Gray 700 */
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .trac-table td {
            background-color: #ffffff;
        }
        .trac-table td:first-child { /* Chapter Name column */
            width: 200px; /* Fixed width for chapter name */
            min-width: 150px;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .trac-table input[type="checkbox"] {
            margin: 0 auto; /* Center checkboxes */
            display: block;
            width: 1.25rem; /* 20px */
            height: 1.25rem; /* 20px */
            border-radius: 0.25rem;
            border: 1px solid #9ca3af; /* Gray 400 */
            accent-color: #4f46e5; /* Indigo for checked state */
            cursor: pointer;
        }
        .trac-table .chapter-name-cell {
            font-weight: 500;
            color: #1f2937; /* Gray 900 */
        }
        .trac-table .chapter-name-cell:focus {
            outline: none;
            background-color: #eef2ff;
            border-radius: 0.25rem;

Padmabhushan Patil, [17-07-2025 11:10]
}
        .revision-checkbox-group {
            display: flex;
            gap: 0.25rem; /* Small gap between checkboxes */
            justify-content: center; /* Center the group */
        }
        .revision-checkbox-group input[type="checkbox"] {
            margin: 0; /* Remove default margin */
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                max-width: 100%;
            }
            .tab-button {
                padding: 0.75rem 0.75rem;
                font-size: 0.85rem;
            }
            .sub-tab-button {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }
            .tab-content {
                padding: 1rem;
            }
            .daily-tracker-grid {
                gap: 0.5rem; /* Even smaller gap on mobile */
            }
            .daily-tracker-time {
                width: 80px; /* Adjust time column width for smaller screens */
                padding: 0.5rem 0.75rem;
            }
            .daily-tracker-activity {
                padding: 0.5rem 0.75rem;
            }
            .todo-item {
                flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            }
            .todo-item-actions {
                margin-top: 0.5rem;
                margin-left: 0; /* Remove auto-margin to stack below */
                width: 100%; /* Take full width */
                justify-content: flex-end; /* Align buttons to the right */
            }
            .trac-table th, .trac-table td {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }
            .trac-table td:first-child {
                width: 120px; /* Smaller fixed width for chapter name on mobile */
                min-width: 100px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 flex justify-center items-start min-h-screen p-4">
    <div class="container bg-white rounded-xl shadow-lg">
        <!-- Tab Navigation -->
        <div class="flex border-b border-gray-200">
            <button id="dailyTrackerTab" class="tab-button flex-1 text-center rounded-tl-xl">Daily Tracker</button>
            <button id="todoListTab" class="tab-button flex-1 text-center">To-Do List</button>
            <button id="tracTab" class="tab-button flex-1 text-center rounded-tr-xl">Trac</button>
        </div>

        <!-- Daily Tracker Content -->
        <div id="dailyTrackerContent" class="tab-content active">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Daily Happenings</h2>
            <div id="dailyTrackerGrid" class="daily-tracker-grid">
                <!-- Daily tracker entries will be generated here by JavaScript -->
            </div>
        </div>

        <!-- To-Do List Content -->
        <div id="todoListContent" class="tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">My To-Do List</h2>
            <div class="flex flex-col sm:flex-row gap-3 mb-6">
                <input type="text" id="newTaskInput" placeholder="Add a new main task..."
                       class="flex-grow editable-task-name px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-300 focus:border-indigo-500 transition duration-200">
                <button id="addTaskButton"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-200">
                    Add Task
                </button>
            </div>
            <div id="todoList" class="space-y-4">
                <!-- To-Do items will be generated here by JavaScript -->
            </div>
        </div>

Padmabhushan Patil, [17-07-2025 11:10]
<!-- Trac Content -->
        <div id="tracContent" class="tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">My Study Tracker</h2>
            <!-- Sub-tab Navigation for Trac -->
            <div class="flex border-b border-gray-200 mb-6">
                <button id="bioSubTab" class="sub-tab-button active flex-1 text-center">Biology</button>
                <button id="chemSubTab" class="sub-tab-button flex-1 text-center">Chemistry</button>
                <button id="physSubTab" class="sub-tab-button flex-1 text-center">Physics</button>
            </div>

            <!-- Biology Content -->
            <div id="bioContent" class="trac-sub-content active">
                <div class="flex flex-col sm:flex-row gap-3 mb-4">
                    <input type="text" id="newBioChapterInput" placeholder="Add Biology Chapter Name..."
                           class="flex-grow editable-chapter-name px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 transition duration-200">
                    <button id="addBioChapterButton"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm transition duration-200">
                        Add Chapter
                    </button>
                </div>
                <div id="bioTableContainer" class="trac-table-container">
                    <!-- Biology table will be generated here by JavaScript -->
                </div>
            </div>

            <!-- Chemistry Content -->
            <div id="chemContent" class="trac-sub-content">
                <div class="flex flex-col sm:flex-row gap-3 mb-4">
                    <input type="text" id="newChemChapterInput" placeholder="Add Chemistry Chapter Name..."
                           class="flex-grow editable-chapter-name px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 transition duration-200">
                    <button id="addChemChapterButton"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm transition duration-200">
                        Add Chapter
                    </button>
                </div>
                <div id="chemTableContainer" class="trac-table-container">
                    <!-- Chemistry table will be generated here by JavaScript -->
                </div>
            </div>

            <!-- Physics Content -->
            <div id="physContent" class="trac-sub-content">
                <div class="flex flex-col sm:flex-row gap-3 mb-4">
                    <input type="text" id="newPhysChapterInput" placeholder="Add Physics Chapter Name..."
                           class="flex-grow editable-chapter-name px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-300 focus:border-blue-500 transition duration-200">
                    <button id="addPhysChapterButton"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm transition duration-200">
                        Add Chapter
                    </button>
                </div>
                <div id="physTableContainer" class="trac-table-container">
                    <!-- Physics table will be generated here by JavaScript -->
                </div>
            </div>

        </div>
    </div>

    <script>
        // DOM Elements
        const dailyTrackerTab = document.getElementById('dailyTrackerTab');
        const todoListTab = document.getElementById('todoListTab');
        const tracTab = document.getElementById('tracTab');

        const dailyTrackerContent = document.getElementById('dailyTrackerContent');
        const todoListContent = document.getElementById('todoListContent');
        const tracContent = document.getElementById('tracContent');

        const dailyTrackerGrid = document.getElementById('dailyTrackerGrid');

Padmabhushan Patil, [17-07-2025 11:10]
const newTaskInput = document.getElementById('newTaskInput');
        const addTaskButton = document.getElementById('addTaskButton');
        const todoList = document.getElementById('todoList');

        const bioSubTab = document.getElementById('bioSubTab');
        const chemSubTab = document.getElementById('chemSubTab');
        const physSubTab = document.getElementById('physSubTab');

        const bioContent = document.getElementById('bioContent');
        const chemContent = document.getElementById('chemContent');
        const physContent = document.getElementById('physContent');

        const newBioChapterInput = document.getElementById('newBioChapterInput');
        const addBioChapterButton = document.getElementById('addBioChapterButton');
        const bioTableContainer = document.getElementById('bioTableContainer');

        const newChemChapterInput = document.getElementById('newChemChapterInput');
        const addChemChapterButton = document.getElementById('addChemChapterButton');
        const chemTableContainer = document.getElementById('chemTableContainer');

        const newPhysChapterInput = document.getElementById('newPhysChapterInput');
        const addPhysChapterButton = document.getElementById('addPhysChapterButton');
        const physTableContainer = document.getElementById('physTableContainer');

        // --- Tab Switching Logic (Main Tabs) ---
        function switchTab(activeTabId) {
            // Remove active class from all main tabs and content
            dailyTrackerTab.classList.remove('active');
            todoListTab.classList.remove('active');
            tracTab.classList.remove('active');

            dailyTrackerContent.classList.remove('active');
            todoListContent.classList.remove('active');
            tracContent.classList.remove('active');

            // Add active class to the selected tab and content
            if (activeTabId === 'dailyTrackerTab') {
                dailyTrackerTab.classList.add('active');
                dailyTrackerContent.classList.add('active');
            } else if (activeTabId === 'todoListTab') {
                todoListTab.classList.add('active');
                todoListContent.classList.add('active');
            } else if (activeTabId === 'tracTab') {
                tracTab.classList.add('active');
                tracContent.classList.add('active');
                // When Trac tab is opened, ensure a sub-tab is active and rendered
                const currentActiveTracSubTab = document.querySelector('.trac-sub-content.active');
                if (!currentActiveTracSubTab) {
                    // Default to Biology if no sub-tab is active
                    switchTracSubTab('bioSubTab');
                } else {
                    // Re-render the currently active sub-tab's table
                    const subject = currentActiveTracSubTab.id.replace('Content', '');
                    renderTracTable(subject);
                }
            }
        }

        dailyTrackerTab.addEventListener('click', () => switchTab('dailyTrackerTab'));
        todoListTab.addEventListener('click', () => switchTab('todoListTab'));
        tracTab.addEventListener('click', () => switchTab('tracTab'));

        // --- Daily Tracker Logic ---
        const dailyTrackerData = JSON.parse(localStorage.getItem('dailyTrackerData')) || {};
        let lastDailyTrackerResetDate = localStorage.getItem('lastDailyTrackerResetDate');

        function formatTime(hour) {
            const h = hour % 12 || 12; // Convert 0 to 12 for 12 AM/PM
            const ampm = hour < 12 || hour === 24 ? 'AM' : 'PM';
            return ${h} ${ampm};
        }

        function renderDailyTracker() {
            dailyTrackerGrid.innerHTML = ''; // Clear existing entries
            for (let i = 5; i <= 24; i++) { // From 5 AM to 12 AM (24 for midnight)
                const timeStr = formatTime(i);
                const timeId = hour-${i};

Padmabhushan Patil, [17-07-2025 11:10]
const rowDiv = document.createElement('div');
                rowDiv.className = 'daily-tracker-row';

                const timeDiv = document.createElement('div');
                timeDiv.className = 'daily-tracker-time editable-time';
                timeDiv.setAttribute('contenteditable', 'true');
                timeDiv.setAttribute('data-time-id', timeId);
                timeDiv.textContent = timeStr; // Initial time

                const activityDiv = document.createElement('textarea');
                activityDiv.className = 'daily-tracker-activity';
                activityDiv.placeholder = 'What happened this hour?';
                activityDiv.rows = 2; // Allow multiple lines
                activityDiv.value = dailyTrackerData[timeId] || ''; // Load saved data

                // Save data on input change
                activityDiv.addEventListener('input', () => {
                    dailyTrackerData[timeId] = activityDiv.value;
                    localStorage.setItem('dailyTrackerData', JSON.stringify(dailyTrackerData));
                });

                // Handle editing of time itself (visual only, ID remains fixed)
                timeDiv.addEventListener('blur', () => {
                    // This allows users to customize the label without breaking data association.
                    // No need to save this specific label change, as it's just visual.
                });

                rowDiv.appendChild(timeDiv);
                rowDiv.appendChild(activityDiv);
                dailyTrackerGrid.appendChild(rowDiv);
            }
        }

        // --- To-Do List Logic ---
        let todoItems = JSON.parse(localStorage.getItem('todoItems')) || [];

        // Helper function to format milliseconds into HH:MM:SS
        function formatElapsedTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return [hours, minutes, seconds]
                .map(unit => String(unit).padStart(2, '0'))
                .join(':');
        }

        function saveTodoItems() {
            localStorage.setItem('todoItems', JSON.stringify(todoItems));
        }

        function startTimer(item) {
            if (item.isTimerRunning || item.completed) return;

            item.isTimerRunning = true;
            item.startTime = Date.now() - item.elapsedTime;
            item.timerIntervalId = setInterval(() => {
                item.elapsedTime = Date.now() - item.startTime;
                // Find the specific time display span for this item and update it
                const timeDisplayElement = document.querySelector([data-task-id="${item.id}"] .todo-section-timer);
                if (timeDisplayElement) {
                    timeDisplayElement.textContent = formatElapsedTime(item.elapsedTime);
                }
                saveTodoItems();
            }, 1000);
            saveTodoItems();
            renderTodoItems();
        }

        function stopTimer(item) {
            if (!item.isTimerRunning) return;

            clearInterval(item.timerIntervalId);
            item.isTimerRunning = false;
            item.elapsedTime = Date.now() - item.startTime;
            saveTodoItems();
            renderTodoItems();
        }

        function resetTimer(item) {
            stopTimer(item);
            item.elapsedTime = 0;
            saveTodoItems();
            renderTodoItems();
        }

        function generateUniqueId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        function renderTodoItems() {
            todoList.innerHTML = ''; // Clear existing items
            todoItems.forEach((mainTask) => {
                const mainTaskSection = document.createElement('div');
                mainTaskSection.className = 'todo-section';
                mainTaskSection.setAttribute('data-task-id', mainTask.id);

Padmabhushan Patil, [17-07-2025 11:10]
const headerDiv = document.createElement('div');
                headerDiv.className = 'todo-section-header';

                const titleDiv = document.createElement('div');
                titleDiv.className = 'todo-section-title';
                titleDiv.innerHTML = 
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm14.024-.983a1.125 1.125 0 010 1.966l-5.604 3.113a1.125 1.125 0 01-1.726-1.966l5.604-3.113a1.125 1.125 0 011.726 1.966z" clip-rule="evenodd" />
                    </svg>
                ;
                const mainTaskNameSpan = document.createElement('span');
                mainTaskNameSpan.className = 'editable-task-name';
                mainTaskNameSpan.setAttribute('contenteditable', 'true');
                mainTaskNameSpan.textContent = mainTask.name;
                mainTaskNameSpan.addEventListener('blur', () => {
                    mainTask.name = mainTaskNameSpan.textContent.trim();
                    saveTodoItems();
                });
                titleDiv.appendChild(mainTaskNameSpan);

                const timerAndActionsDiv = document.createElement('div');
                timerAndActionsDiv.className = 'flex items-center gap-2';

                const timeDisplaySpan = document.createElement('span');
                timeDisplaySpan.className = 'todo-section-timer';
                timeDisplaySpan.textContent = formatElapsedTime(mainTask.elapsedTime);
                timerAndActionsDiv.appendChild(timeDisplaySpan);

                const mainTaskActions = document.createElement('div');
                mainTaskActions.className = 'flex gap-1';

                const startButton = document.createElement('button');
                startButton.className = 'action-button start-button';
                startButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>;
                startButton.title = 'Start Timer';
                startButton.addEventListener('click', () => startTimer(mainTask));

                const stopButton = document.createElement('button');
                stopButton.className = 'action-button stop-button';
                stopButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.25 7.5A.75.75 0 008.5 8.25v3.5a.75.75 0 001.5 0v-3.5a.75.75 0 00-.75-.75zm3 0A.75.75 0 0011.5 8.25v3.5a.75.75 0 001.5 0v-3.5a.75.75 0 00-.75-.75z" clip-rule="evenodd" /></svg>;
                stopButton.title = 'Stop Timer';
                stopButton.addEventListener('click', () => stopTimer(mainTask));

                const resetButton = document.createElement('button');
                resetButton.className = 'action-button reset-button';
                resetButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 00-9.201 2.566c.18.508.336.982.463 1.442.232.853.291 1.673.291 2.288 0 .42-.147.79-.413 1.056A.75.75 0 015.378 18h-.003a.75.75 0 01-.53-.22L2.72 15.37a.75.75 0 010-1.06l2.12-2.12a.75.75 0 011.06 1.06l-1.603 1.603 1.153 1.153c.205-.38.33-.82.33-1.328 0-.46-.076-.9-.22-1.307a4 4 0 016.382-2.022l-.995-.995a.75.75 0 011.06-1.06l2.25 2.25a.75.75 0 010 1.06l-2.25 2.25a.75.75 0 01-1.06-1.06l.995-.995z" clip-rule="evenodd" /></svg>;
                resetButton.title = 'Reset Timer';
                resetButton.addEventListener('click', () => resetTimer(mainTask));

Padmabhushan Patil, [17-07-2025 11:10]
const deleteMainTaskButton = document.createElement('button');
                deleteMainTaskButton.className = 'action-button delete-button';
                deleteMainTaskButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 01-2 0v6a1 1 0 112 0V8z" clip-rule="evenodd" /></svg>;
                deleteMainTaskButton.title = 'Delete Main Task';
                deleteMainTaskButton.addEventListener('click', () => {
                    stopTimer(mainTask);
                    todoItems = todoItems.filter(task => task.id !== mainTask.id);
                    saveTodoItems();
                    renderTodoItems();
                });

                if (!mainTask.completed) {
                    if (mainTask.isTimerRunning) {
                        mainTaskActions.appendChild(stopButton);
                    } else {
                        mainTaskActions.appendChild(startButton);
                    }
                    mainTaskActions.appendChild(resetButton);
                } else {
                    mainTaskActions.appendChild(resetButton);
                }
                mainTaskActions.appendChild(deleteMainTaskButton);

                timerAndActionsDiv.appendChild(mainTaskActions);
                headerDiv.appendChild(titleDiv);
                headerDiv.appendChild(timerAndActionsDiv);
                mainTaskSection.appendChild(headerDiv);

                // Sub-tasks
                const subTasksList = document.createElement('div');
                subTasksList.className = 'space-y-1';
                mainTask.subTasks.forEach((subTask, subIndex) => {
                    const subTaskDiv = document.createElement('div');
                    subTaskDiv.className = todo-item ${subTask.completed ? 'completed' : ''};

                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.checked = subTask.completed;
                    checkbox.addEventListener('change', () => {
                        subTask.completed = checkbox.checked;
                        saveTodoItems();
                        renderTodoItems(); // Re-render to update completed state visually
                    });

                    const subTaskNameSpan = document.createElement('span');
                    subTaskNameSpan.className = 'editable-task-name flex-grow';
                    subTaskNameSpan.setAttribute('contenteditable', 'true');
                    subTaskNameSpan.textContent = subTask.name;
                    subTaskNameSpan.addEventListener('blur', () => {
                        subTask.name = subTaskNameSpan.textContent.trim();
                        saveTodoItems();
                    });

                    const subTaskActions = document.createElement('div');
                    subTaskActions.className = 'todo-item-actions';

                    const deleteSubTaskButton = document.createElement('button');
                    deleteSubTaskButton.className = 'action-button delete-button';
                    deleteSubTaskButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 01-2 0v6a1 1 0 112 0V8z" clip-rule="evenodd" /></svg>;

Padmabhushan Patil, [17-07-2025 11:10]
deleteSubTaskButton.title = 'Delete Sub-task';
                    deleteSubTaskButton.addEventListener('click', () => {
                        mainTask.subTasks.splice(subIndex, 1);
                        saveTodoItems();
                        renderTodoItems();
                    });

                    subTaskActions.appendChild(deleteSubTaskButton);

                    subTaskDiv.appendChild(checkbox);
                    subTaskDiv.appendChild(subTaskNameSpan);
                    subTaskDiv.appendChild(subTaskActions);
                    subTasksList.appendChild(subTaskDiv);
                });

                // Add Sub-task Input
                const addSubTaskDiv = document.createElement('div');
                addSubTaskDiv.className = 'flex gap-2 ml-6 mt-2'; // Indent for sub-task input
                const newSubTaskInput = document.createElement('input');
                newSubTaskInput.type = 'text';
                newSubTaskInput.placeholder = 'Add a sub-task...';
                newSubTaskInput.className = 'flex-grow editable-task-name px-3 py-1.5 rounded-md border border-gray-300 focus:ring-1 focus:ring-indigo-200 focus:border-indigo-400 text-sm';
                newSubTaskInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const subTaskName = newSubTaskInput.value.trim();
                        if (subTaskName) {
                            mainTask.subTasks.push({ name: subTaskName, completed: false });
                            newSubTaskInput.value = '';
                            saveTodoItems();
                            renderTodoItems();
                        }
                    }
                });
                const addSubTaskButton = document.createElement('button');
                addSubTaskButton.className = 'bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2 rounded-md text-xs shadow-sm transition duration-200';
                addSubTaskButton.textContent = 'Add';
                addSubTaskButton.addEventListener('click', () => {
                    const subTaskName = newSubTaskInput.value.trim();
                    if (subTaskName) {
                        mainTask.subTasks.push({ name: subTaskName, completed: false });
                        newSubTaskInput.value = '';
                        saveTodoItems();
                        renderTodoItems();
                    }
                });

                addSubTaskDiv.appendChild(newSubTaskInput);
                addSubTaskDiv.appendChild(addSubTaskButton);

                mainTaskSection.appendChild(subTasksList);
                mainTaskSection.appendChild(addSubTaskDiv);
                todoList.appendChild(mainTaskSection);
            });
        }

        addTaskButton.addEventListener('click', () => {
            const taskName = newTaskInput.value.trim();

            if (taskName) {
                todoItems.push({
                    id: generateUniqueId(), // Unique ID for each main task
                    name: taskName,
                    completed: false, // Main task completion is not directly tracked
                    elapsedTime: 0,
                    isTimerRunning: false,
                    timerIntervalId: null,
                    startTime: null,
                    subTasks: [] // Array to hold sub-tasks
                });
                newTaskInput.value = '';
                saveTodoItems();
                renderTodoItems();
            } else {
                newTaskInput.style.borderColor = '#ef4444';
                setTimeout(() => {
                    newTaskInput.style.borderColor = '#e5e7eb';
                }, 1500);
            }
        });

        // --- Trac Tab Logic ---
        const tracCheckboxes = [
            "Lec", "DPP", "Module", "NEET PYQ", "JEE PYQ", "Reference Book",
            "Mains Level", "NCERT", "Pitara (LTL)", "Infinite Prac", "Prep Meter", "Revision"
        ];

Padmabhushan Patil, [17-07-2025 11:10]
let tracData = JSON.parse(localStorage.getItem('tracData')) || {
            bio: [],
            chem: [],
            phys: []
        };

        function saveTracData() {
            localStorage.setItem('tracData', JSON.stringify(tracData));
        }

        // --- Sub-tab Switching Logic for Trac ---
        let currentActiveTracSubject = 'bio'; // Default active subject

        function switchTracSubTab(activeSubTabId) {
            // Remove active class from all sub-tabs and content
            bioSubTab.classList.remove('active');
            chemSubTab.classList.remove('active');
            physSubTab.classList.remove('active');

            bioContent.classList.remove('active');
            chemContent.classList.remove('active');
            physContent.classList.remove('active');

            // Add active class to the selected sub-tab and content
            if (activeSubTabId === 'bioSubTab') {
                bioSubTab.classList.add('active');
                bioContent.classList.add('active');
                currentActiveTracSubject = 'bio';
            } else if (activeSubTabId === 'chemSubTab') {
                chemSubTab.classList.add('active');
                chemContent.classList.add('active');
                currentActiveTracSubject = 'chem';
            } else if (activeSubTabId === 'physSubTab') {
                physSubTab.classList.add('active');
                physContent.classList.add('active');
                currentActiveTracSubject = 'phys';
            }
            renderTracTable(currentActiveTracSubject); // Render the table for the active subject
        }

        bioSubTab.addEventListener('click', () => switchTracSubTab('bioSubTab'));
        chemSubTab.addEventListener('click', () => switchTracSubTab('chemSubTab'));
        physSubTab.addEventListener('click', () => switchTracSubTab('physSubTab'));

        function renderTracTable(subject) {
            const container = document.getElementById(${subject}TableContainer);
            container.innerHTML = ''; // Clear existing table

            const table = document.createElement('table');
            table.className = 'trac-table';

            // Create table header
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            const chapterNameTh = document.createElement('th');
            chapterNameTh.textContent = 'Chapter Name';
            headerRow.appendChild(chapterNameTh);

            tracCheckboxes.forEach(col => {
                const th = document.createElement('th');
                th.textContent = col;
                headerRow.appendChild(th);
            });
            // Add header for delete button
            const deleteHeaderTh = document.createElement('th');
            deleteHeaderTh.textContent = 'Actions';
            headerRow.appendChild(deleteHeaderTh);

            thead.appendChild(headerRow);
            table.appendChild(thead);

            // Create table body
            const tbody = document.createElement('tbody');
            tracData[subject].forEach((chapter, chapterIndex) => {
                const row = document.createElement('tr');

                // Chapter Name cell
                const chapterNameTd = document.createElement('td');
                const chapterNameSpan = document.createElement('span');
                chapterNameSpan.className = 'chapter-name-cell';
                chapterNameSpan.setAttribute('contenteditable', 'true');
                chapterNameSpan.textContent = chapter.chapterName;
                chapterNameSpan.addEventListener('blur', () => {
                    chapter.chapterName = chapterNameSpan.textContent.trim();
                    saveTracData();
                });
                chapterNameTd.appendChild(chapterNameSpan);
                row.appendChild(chapterNameTd);

Padmabhushan Patil, [17-07-2025 11:10]
// Checkbox cells
                tracCheckboxes.forEach(col => {
                    const td = document.createElement('td');
                    if (col === "Revision") {
                        const revisionGroup = document.createElement('div');
                        revisionGroup.className = 'revision-checkbox-group';
                        for (let i = 0; i < 5; i++) {
                            const checkbox = document.createElement('input');
                            checkbox.type = 'checkbox';
                            // Ensure chapter.Revision is an array, initialize if not
                            if (!Array.isArray(chapter.Revision)) {
                                chapter.Revision = [false, false, false, false, false];
                            }
                            checkbox.checked = chapter.Revision[i]; // Load saved state for each checkbox
                            checkbox.addEventListener('change', () => {
                                chapter.Revision[i] = checkbox.checked;
                                saveTracData();
                            });
                            revisionGroup.appendChild(checkbox);
                        }
                        td.appendChild(revisionGroup);
                    } else {
                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.checked = chapter[col]; // Load saved state
                        checkbox.addEventListener('change', () => {
                            chapter[col] = checkbox.checked;
                            saveTracData();
                        });
                        td.appendChild(checkbox);
                    }
                    row.appendChild(td);
                });

                // Add a delete button for the row
                const deleteTd = document.createElement('td');
                const deleteButton = document.createElement('button');
                deleteButton.className = 'action-button delete-button';
                deleteButton.innerHTML = <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 01-2 0v6a1 1 0 112 0V8z" clip-rule="evenodd" /></svg>;
                deleteButton.title = 'Delete Chapter';
                deleteButton.addEventListener('click', () => {
                    tracData[subject].splice(chapterIndex, 1);
                    saveTracData();
                    renderTracTable(subject); // Re-render after deletion
                });
                deleteTd.appendChild(deleteButton);
                row.appendChild(deleteTd);

                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            container.appendChild(table);
        }

        function addChapter(subject, inputElement) {
            const chapterName = inputElement.value.trim();
            if (chapterName) {
                const newChapter = { chapterName: chapterName };
                tracCheckboxes.forEach(col => {
                    if (col === "Revision") {
                        newChapter[col] = [false, false, false, false, false]; // Initialize 5 checkboxes for Revision
                    } else {
                        newChapter[col] = false; // Initialize other checkboxes to false
                    }
                });
                tracData[subject].push(newChapter);
                inputElement.value = ''; // Clear input
                saveTracData();

Padmabhushan Patil, [17-07-2025 11:10]
renderTracTable(subject); // Re-render the table
            } else {
                inputElement.style.borderColor = '#ef4444'; // Red border
                setTimeout(() => {
                    inputElement.style.borderColor = '#e5e7eb'; // Back to normal
                }, 1500);
            }
        }

        addBioChapterButton.addEventListener('click', () => addChapter('bio', newBioChapterInput));
        addChemChapterButton.addEventListener('click', () => addChapter('chem', newChemChapterInput));
        addPhysChapterButton.addEventListener('click', () => addChapter('phys', newPhysChapterInput));

        // Initial render on page load
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toDateString();

            // --- Daily Tracker Reset Logic ---
            if (localStorage.getItem('lastDailyTrackerResetDate') !== today) {
                // It's a new day, reset the daily tracker
                localStorage.removeItem('dailyTrackerData');
                localStorage.setItem('lastDailyTrackerResetDate', today);
                // Re-initialize dailyTrackerData to an empty object for the new day
                // This assumes dailyTrackerData is a global or accessible variable.
                // If not, you might need to re-fetch it or pass it.
                // For now, let's assume it's directly updated.
                Object.keys(dailyTrackerData).forEach(key => delete dailyTrackerData[key]);
            }
            renderDailyTracker();


            // On load, ensure all todo timers are stopped as setIntervals don't persist across sessions.
            todoItems.forEach(item => {
                if (item.isTimerRunning) {
                    clearInterval(item.timerIntervalId);
                    item.isTimerRunning = false;
                }
                item.timerIntervalId = null;
                item.startTime = null;
            });
            saveTodoItems();
            renderTodoItems();
            switchTab('dailyTrackerTab'); // Default to Daily Tracker tab
            switchTracSubTab('bioSubTab'); // Default to Biology sub-tab within Trac
        });
    </script>
</body>
</html>
